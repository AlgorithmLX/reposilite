var Ie=Object.defineProperty;var le=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var ie=(o,t,r)=>t in o?Ie(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,ce=(o,t)=>{for(var r in t||(t={}))Te.call(t,r)&&ie(o,r,t[r]);if(le)for(var r of le(t))Ce.call(t,r)&&ie(o,r,t[r]);return o};import{r as q,a as de,u as ue,w as D,d as Ee,b as Se,c as m,o as d,e as u,f as g,g as l,t as k,h as C,n as ee,i as pe,E as Le,S as Me,j as f,k as x,l as Oe,m as G,v as K,p as qe,q as A,s as _e,x as me,y as B,z as E,A as P,P as Ae,B as Be,C as H,D as te,F as S,G as O,T as Pe,H as Re,I as je,J as Ve,K as De,L as ge,M as He,N as Ne,O as ze,Q as Ue,R as We,U as Ge}from"./vendor.5488b9be.js";const Ke=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}};Ke();const N=q({isDark:!1}),he="dark-theme";function fe(){return{theme:N,fetchTheme:()=>{N.isDark=localStorage.getItem(he)==="true"},toggleTheme:()=>{N.isDark=!N.isDark,localStorage.setItem(he,N.isDark)}}}function V(){const o=!"{{REPOSILITE.BASE_PATH}}".includes("REPOSILITE.BASE_PATH"),t=o?"{{REPOSILITE.BASE_PATH}}":"/",r=o?"{{REPOSILITE.ID}}":"reposilite-repository",e=o?"{{REPOSILITE.TITLE}}":"Reposilite Repository",s=o?"{{REPOSILITE.DESCRIPTION}}":"Public Maven repository hosted through the Reposilite",i=o?"{{REPOSILITE.ORGANIZATION_WEBSITE}}":location.protocol+"//"+location.host+t;return{available:o,basePath:t,id:r,title:e,description:s,organizationWebsite:i,organizationLogo:o?"{{REPOSILITE.ORGANIZATION_LOGO}}":"https://avatars.githubusercontent.com/u/75123628?s=200&v=4",icpLicense:o?"{{REPOSILITE.ICP_LICENSE}}":"\u56FDICP\u5907000000000\u53F7"}}const{basePath:Fe}=V(),oe=()=>window.location.protocol+"//"+location.host+Fe,Qe=()=>oe().endsWith("/")?oe().slice(0,-1):oe(),F=o=>Qe()+o,ne=(o,t)=>{const r=()=>o&&t?e(o,t):{},e=(n,a)=>({headers:{Authorization:`xBasic ${btoa(`${n}:${a}`)}`}}),s=(n,a)=>(a=a||r(),de.get(F(n),ce({},a)));return{createURL:F,client:{auth:{me(n,a){return s("/api/auth/me",e(n,a))}},console:{},maven:{content(n){return s(`/${n}`)},details(n){return s(`/api/maven/details/${n||""}`)}}}}},L="",ve="session-token-name",be="session-token-secret",Ye="access-token:manager",Q=q({name:L,secret:L}),ye={id:L,name:L,createdAt:L,permissions:[],routes:[]},Y=q({details:ye});function z(){const o=(n,a)=>{localStorage.setItem(ve,n),Q.name=n,localStorage.setItem(be,a),Q.secret=a},t=()=>{o(L,L),Y.details=ye},r=async(n,a)=>{try{const{client:p}=ne();if(n==L)throw new Error("Missing credentials");const c=await p.auth.me(n,a);return o(n,a),Y.details=c.data,{token:Q,session:Y}}catch(p){throw t(),p}};return{token:Q,session:Y,login:r,logout:t,fetchSession:()=>r(localStorage.getItem(ve),localStorage.getItem(be)),isLogged:n=>(n==null?void 0:n.name)!=L,isManager:n=>{var a;return(a=n==null?void 0:n.permissions)==null?void 0:a.find(p=>p.identifier==Ye)}}}const Z=q({watchable:0,path:""});function Ze(o){const t=ue();return D(()=>t.params.qualifier,r=>{Z.path=r,Z.watchable++},{immediate:!0}),D(()=>o.name,r=>Z.watchable++),{qualifier:Z}}var v=(o,t)=>{for(const[r,e]of t)o[r]=e;return o};const Je=Ee({setup(){const{title:o,description:t,organizationLogo:r,icpLicense:e}=V();Se({title:o,description:t});const{theme:s,fetchTheme:i}=fe(),{fetchSession:n,token:a,session:p}=z(),{qualifier:c}=Ze(a);return i(),n().catch(h=>{}),{theme:s,qualifier:c,token:a,session:p,icpLicense:e}}}),Xe={key:0,class:"absolute h-3 pt-1.5 pb-1.5 w-full text-center text-xs"},et={href:"https://beian.miit.gov.cn",target:"_blank"};function tt(o,t,r,e,s,i){const n=m("router-view");return d(),u("div",{class:ee({dark:o.theme.isDark})},[g(n,{class:"dark:bg-black dark:text-white",qualifier:o.qualifier,token:o.token,session:o.session},null,8,["qualifier","token","session"]),o.icpLicense?(d(),u("div",Xe,[l("a",et,k(o.icpLicense),1)])):C("",!0)],2)}var ot=v(Je,[["render",tt]]);const nt={},st={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},rt=l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),at=[rt];function lt(o,t){return d(),u("svg",st,at)}var it=v(nt,[["render",lt]]);const ct={components:{GlobeIcon:it},setup(){const{description:o,organizationWebsite:t,organizationLogo:r}=V();return{description:o,organizationWebsite:t,organizationLogo:r}}},dt={class:"bg-gray-100 dark:bg-black"},ut={class:"container mx-auto flex flex-row <sm:flex-col <sm:items-center"},pt={class:"w-35 <sm:mb-2"},_t=["src"],mt={class:"flex flex-col justify-center px-10 <sm:px-0"},gt={class:"<sm:text-center"},ht={class:"flex flex-row py-2 <sm:justify-center"},ft=["href"];function vt(o,t,r,e,s,i){const n=m("GlobeIcon");return d(),u("div",dt,[l("div",ut,[l("div",pt,[l("img",{class:"border-2 rounded-full dark:border-gray-700",src:e.organizationLogo},null,8,_t)]),l("div",mt,[l("div",gt,k(e.description),1),l("div",ht,[g(n),l("a",{class:"px-3 text-gray-500",href:e.organizationWebsite},k(e.organizationWebsite),9,ft)])])])])}var bt=v(ct,[["render",vt]]);const yt={},kt={class:"mx-2 py-1.5 rounded-full bg-white dark:bg-gray-900 font-bold px-6 text-sm cursor-pointer min-w-93px"};function xt(o,t){return d(),u("div",kt,[pe(o.$slots,"default")])}var wt=v(yt,[["render",xt]]);const $t={inheritAttrs:!1,components:{VueFinalModal:Le,ModalsContainer:Me},setup(){const{login:o}=z(),t=f(!1),r=f(""),e=f(""),s=()=>t.value=!1;return{name:r,secret:e,close:s,showLogin:t,signin:(n,a)=>{o(n,a).then(p=>A(`Dashboard accessed as ${n}`,{position:"bottom-right"})).then(p=>s()).catch(p=>{console.log(p),A(`${p.response.status}: ${p.response.data.message}`,{type:"danger"})})}}}},It=o=>(_e("data-v-1d9af69e"),o=o(),me(),o),Tt={class:"relative border bg-white dark:bg-gray-900 border-gray-100 dark:border-black m-w-20 py-5 px-10 rounded-2xl shadow-xl text-center"},Ct=It(()=>l("p",{class:"font-bold text-xl pb-4"},"Login with access token",-1)),Et={class:"text-right mt-1"};function St(o,t,r,e,s,i){const n=m("vue-final-modal");return d(),u("div",null,[g(n,qe({modelValue:e.showLogin,"onUpdate:modelValue":t[6]||(t[6]=a=>e.showLogin=a)},o.$attrs,{classes:"flex justify-center items-center"}),{default:x(()=>[l("div",Tt,[Ct,l("form",{class:"flex flex-col w-96",onSubmit:t[4]||(t[4]=Oe(a=>e.signin(e.name,e.secret),["prevent"]))},[G(l("input",{placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=a=>e.name=a),type:"text",class:"input"},null,512),[[K,e.name]]),G(l("input",{placeholder:"Secret","onUpdate:modelValue":t[1]||(t[1]=a=>e.secret=a),type:"password",class:"input"},null,512),[[K,e.secret]]),l("div",Et,[l("button",{onClick:t[2]||(t[2]=a=>e.close()),class:"text-blue-400 text-xs"},"\u2190 Back to index")]),l("div",{class:"bg-gray-100 dark:bg-gray-800 py-2 my-3 rounded-md cursor-pointer",onClick:t[3]||(t[3]=a=>e.signin(e.name,e.secret))},"Sign in")],32),l("button",{class:"absolute top-0 right-0 mt-5 mr-5",onClick:t[5]||(t[5]=a=>e.close())},"\u{1F5D9}")])]),_:1},16,["modelValue"]),l("div",{onClick:t[7]||(t[7]=a=>e.showLogin=!0)},[pe(o.$slots,"button",{},void 0,!0)])])}var Lt=v($t,[["render",St],["__scopeId","data-v-1d9af69e"]]);const Mt={},Ot={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},qt=l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1),At=[qt];function Bt(o,t){return d(),u("svg",Ot,At)}var Pt=v(Mt,[["render",Bt]]);const Rt={},jt={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Vt=l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1),Dt=[Vt];function Ht(o,t){return d(),u("svg",jt,Dt)}var Nt=v(Rt,[["render",Ht]]);const zt={components:{MenuButton:wt,LoginModal:Lt,MoonIcon:Pt,SunIcon:Nt},props:{token:{type:Object,required:!0}},setup(o){const{theme:t,toggleTheme:r}=fe(),{title:e}=V(),{isLogged:s,logout:i}=z(),n=o.token,a=B(()=>s(n));return{token:n,title:e,logged:a,signout:()=>i(),theme:t,toggleTheme:r}}},Ut={class:"flex flex-row"},Wt={key:0,class:"pt-1.1 px-2"},Gt=P(" Welcome "),Kt={class:"font-bold underline"},Ft=P(" Sign in "),Qt=P(" Logout ");function Yt(o,t,r,e,s,i){const n=m("MenuButton"),a=m("LoginModal"),p=m("SunIcon"),c=m("MoonIcon");return d(),u("nav",Ut,[e.logged?(d(),u("div",Wt,[Gt,l("span",Kt,k(e.token.name),1)])):C("",!0),g(a,null,{button:x(()=>[e.logged?C("",!0):(d(),E(n,{key:0},{default:x(()=>[Ft]),_:1}))]),_:1}),e.logged?(d(),E(n,{key:1,onClick:t[0]||(t[0]=h=>e.signout())},{default:x(()=>[Qt]),_:1})):C("",!0),l("div",{class:"pl-2 pt-1.3 cursor-pointer rounded-full bg-white dark:bg-gray-900 max-h-33px",onClick:t[1]||(t[1]=h=>e.toggleTheme())},[e.theme.isDark?(d(),E(p,{key:0,class:"mr-1.9"})):(d(),E(c,{key:1,class:"mr-1.5"}))])])}var Zt=v(zt,[["render",Yt]]);const Jt={components:{Hero:bt,Menu:Zt},props:{token:{type:Object,required:!0}},setup(o){const t=o.token,{title:r}=V();return{token:t,title:r}}},Xt={class:"bg-gray-100 dark:bg-black dark:text-white"},eo={class:"container mx-auto flex flex-row py-10 justify-between <sm:pb-2"},to={class:"text-xl font-medium py-1"};function oo(o,t,r,e,s,i){const n=m("router-link"),a=m("Menu"),p=m("Hero");return d(),u("header",Xt,[l("div",eo,[l("h1",to,[g(n,{to:"/"},{default:x(()=>[P(k(e.title),1)]),_:1})]),g(a,{token:e.token,class:"mt-0.5"},null,8,["token"])]),g(p,{class:"pt-2 pb-11 <sm:pb-4"})])}var no=v(Jt,[["render",oo]]);function so(){return{createSnippets:(t,r,e)=>[{name:"Maven",lang:"xml",snippet:`
<dependency>
  <groupId>${t}</groupId>
  <artifactId>${r}</artifactId>
  <version>${e}</version>
</dependency>`.trim()},{name:"Gradle Groovy",lang:"xml",snippet:`implementation "${t}:${r}:${e}"`},{name:"Gradle Kotlin",lang:"kotlin",snippet:`implementation("${t}:${r}:${e}")`},{name:"SBT",lang:"scala",snippet:`"${t}" %% "${r}" %% "${e}"`}]}}function ro(){const{id:o,title:t}=V();return{createRepositories:e=>{const s=B(()=>e.path.split("/")[0]),i=o+(e.path?`-${s.value}`:""),n=location.protocol+"//"+location.host+(e.path?`/${s.value}`:"/{repository}");return[{name:"Maven",lang:"xml",snippet:`
<repository>
  <id>${i}</id>
  <name>${t}</name>
  <url>${n}</url>
</repository>
        `.trim()},{name:"Gradle Groovy",lang:"groovy",snippet:`maven {
    url "${n}"
 }`.trim()},{name:"Gradle Kotlin",lang:"kotlin",snippet:`maven {
    url = uri("${n}")
}`},{name:"SBT",lang:"scala",snippet:`resolvers += "${i}" at "${n}"`}]}}}const ao=new DOMParser;function lo(){return{parseMetadata:s=>ao.parseFromString(s,"text/xml"),groupId:s=>{var i,n;return(n=(i=s==null?void 0:s.getElementsByTagName("groupId")[0])==null?void 0:i.firstChild)==null?void 0:n.nodeValue},artifactId:s=>{var i,n;return(n=(i=s==null?void 0:s.getElementsByTagName("artifactId")[0])==null?void 0:i.firstChild)==null?void 0:n.nodeValue},versions:s=>{var i,n,a;return(a=(n=Array.from((i=s==null?void 0:s.getElementsByTagName("versioning")[0])==null?void 0:i.children))==null?void 0:n.map(p=>p.firstChild.nodeValue))!=null?a:["{unknown}"]}}}const io={},co={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},uo=l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},null,-1),po=[uo];function _o(o,t){return d(),u("svg",co,po)}var mo=v(io,[["render",_o]]);const go={},ho={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},fo=l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1),vo=[fo];function bo(o,t){return d(),u("svg",ho,vo)}var yo=v(go,[["render",bo]]);const ko={components:{PrismEditor:Ae,CopyIcon:mo,DownIcon:yo},props:{qualifier:{type:Object,required:!0},token:{type:Object,required:!0}},setup(o){const t=o.qualifier,r=o.token,e=f(""),s=f([]),{createRepositories:i}=ro(),{createSnippets:n}=so(),{parseMetadata:a,groupId:p,artifactId:c,versions:h}=lo(),{client:_}=ne(r.name,r.secret),{copy:I,isSupported:b}=Be(),w=f(localStorage.getItem("card-tab")||"Maven"),R=f(localStorage.getItem("dropdown-open")||!1);H(()=>localStorage.setItem("card-tab",w.value)),H(()=>localStorage.setItem("dropdown-open",R.value));const U=()=>{s.value=i(t),e.value="Repository details"},M=T=>{const y=a(T);s.value=n(p(y),c(y),h(y)[0]),e.value="Artifact details"};H(()=>{const T=t.path.split("/");if(T.length==1&&T[0]==""){U();return}_.maven.content(`${t.path}/maven-metadata.xml`).then(y=>M(y.data)).catch(y=>{y.message!=="Request failed with status code 404"&&console.log(y),U()})}),H(()=>{s.value.forEach(T=>{T.highlighter=y=>{var W;return te.highlight(y,(W=te.languages[T.lang])!=null?W:te.languages.js)}})});const j=f("slide-right");return D(w,(T,y)=>{const W=s.value.findIndex(X=>X.name===T),$e=s.value.findIndex(X=>X.name===y);j.value=W-$e<0?"slide-left":"slide-right"}),{title:e,configurations:s,selectedTab:w,transitionName:j,copy:async()=>{const{snippet:T}=s.value.find(y=>y.name===w.value);return await I(T),A("Copied snippet",{type:"info"})},isCopySupported:b,dropdownOpen:R}}},xo={class:"bg-white dark:bg-gray-900 shadow-lg p-7 rounded-xl border-gray-100 dark:border-black"},wo={class:"flex flex-row justify-between"},$o={class:"font-bold flex items-center w-full"},Io={class:"flex <sm:hidden"},To=["onClick"],Co={class:"hidden flex-col items-center mt-24px <sm:flex"},Eo={class:"w-20px h-25px float-right m-auto flex items-center"},So={key:0,class:"rounded-lg w-full box-border p-2 bg-true-gray-100 dark:bg-dark-600"},Lo=["onClick"],Mo=l("hr",{class:"dark:border-gray-800 <sm:hidden"},null,-1),Oo={class:"overflow-hidden"};function qo(o,t,r,e,s,i){const n=m("copy-icon"),a=m("down-icon"),p=m("prism-editor");return d(),u("div",xo,[l("div",wo,[l("h1",$o,[P(k(e.title)+" ",1),e.isCopySupported?(d(),u("span",{key:0,onClick:t[0]||(t[0]=(...c)=>e.copy&&e.copy(...c)),class:"ml-auto cursor-pointer"},[g(n)])):C("",!0)])]),l("div",Io,[(d(!0),u(S,null,O(e.configurations,c=>(d(),u("div",{key:c.name,onClick:h=>e.selectedTab=c.name,class:ee(["py-4 px-7 flex-grow text-center border-b-2 cursor-pointer border-transparent",{"!border-gray-800":c.name===e.selectedTab}])},k(c.name),11,To))),128))]),l("div",Co,[l("div",{class:"w-full box-border py-5px p-2 rounded-lg border-1 border-true-gray-200 dark:border-dark-300",onClick:t[1]||(t[1]=c=>e.dropdownOpen=!e.dropdownOpen)},[P(k(e.selectedTab)+" ",1),l("div",Eo,[g(a)])]),e.dropdownOpen?C("",!0):(d(),u("ul",So,[(d(!0),u(S,null,O(e.configurations,c=>(d(),u("li",{key:c.name,onClick:h=>{e.selectedTab=c.name,e.dropdownOpen=!e.dropdownOpen},class:ee(["dropdown py-1",{hidden:c.name===e.selectedTab}])},k(c.name),11,Lo))),128))]))]),Mo,l("div",Oo,[g(Pe,{name:e.transitionName,mode:"out-in"},{default:x(()=>[(d(),u("div",{key:e.selectedTab,class:"relative h-33 mt-6 p-4 mr-1 rounded-lg bg-gray-100 dark:bg-gray-800"},[(d(!0),u(S,null,O(e.configurations,c=>(d(),u(S,null,[c.name===e.selectedTab?(d(),E(p,{key:0,class:"snippet absolute text-sm",modelValue:c.snippet,"onUpdate:modelValue":h=>c.snippet=h,highlight:c.highlighter,readonly:"","line-numbers":""},null,8,["modelValue","onUpdate:modelValue","highlight"])):C("",!0)],64))),256))]))]),_:1},8,["name"])])])}var Ao=v(ko,[["render",qo]]);const Bo={props:{file:{type:Object,required:!0}},setup(o){return{file:o.file,prettyBytes:Re}}},Po={class:"flex flex-row justify-between mb-1.5 py-3 rounded-full bg-white dark:bg-gray-900 lg:max-w-2/5 xl:max-w-1/2 cursor-pointer"},Ro={class:"flex flex-row"},jo={key:0,class:"text-xm px-6 pt-1.75"},Vo={key:1,class:"text-xm px-6 pt-1.75"},Do={class:"font-semibold"},Ho={key:0,class:"px-6"};function No(o,t,r,e,s,i){return d(),u("div",Po,[l("div",Ro,[e.file.type=="DIRECTORY"?(d(),u("div",jo,"\u26AB")):(d(),u("div",Vo,"\u26AA")),l("div",Do,k(e.file.name),1)]),e.file.contentLength?(d(),u("div",Ho,k(e.prettyBytes(e.file.contentLength)),1)):C("",!0)])}var zo=v(Bo,[["render",No]]);const Uo={components:{Card:Ao,Entry:zo},props:{qualifier:{type:Object,required:!0},token:{type:Object,required:!0}},setup(o){const t=o.qualifier,r=o.token,e=f(""),s=f([]),i=f(!1),n=f(void 0),a=_=>_.type=="DIRECTORY",p=ue(),c=_=>(_.endsWith("/")?_.slice(0,-1):_).split("/").slice(0,-1).join("/")||"/";D(()=>t.watchable,async _=>{const{client:I}=ne(r.name,r.secret);I.maven.details(t.path).then(b=>{s.value=b.data.files,i.value=s.value.length==0,n.value=void 0}).catch(b=>{console.log(b),A(`${b.response.status}: ${b.response.data.message}`,{type:"danger"}),n.value=b}),e.value=c(`/${t.path}`)},{immediate:!0});const h=B(()=>{const _=p.path.split("/");return _.map((I,b)=>({link:_.slice(0,b+1).join("/")||"/",name:b===_.length-1?I:I+"/"}))});return{qualifier:t,token:r,parentPath:e,files:s,isEmpty:i,isErrored:n,isDirectory:a,createURL:F,breadcrumbs:h}}},Wo={class:"bg-gray-100"},Go={class:"bg-gray-100 dark:bg-black"},Ko={class:"container mx-auto"},Fo={class:"pt-7 pb-3 pl-2 font-semibold"},Qo=l("span",{class:"select-none"},"Index of ",-1),Yo={class:"select-text"},Zo=l("span",{class:"font-normal text-xl text-gray-500 select-none"}," \u2934 ",-1),Jo={class:"dark:bg-black"},Xo={class:"container mx-auto relative min-h-320px mb-1.5"},en={class:"lg:absolute pt-5 -top-5 right-8"},tn={class:"pt-4"},on=["href"],nn={key:0},sn=l("p",null,"Directory is empty",-1),rn=[sn],an={key:1},ln=l("p",null,"Directory not found",-1),cn=[ln];function dn(o,t,r,e,s,i){const n=m("router-link"),a=m("Card"),p=m("Entry");return d(),u("div",Wo,[l("div",Go,[l("div",Ko,[l("p",Fo,[Qo,l("span",Yo,[(d(!0),u(S,null,O(e.breadcrumbs,c=>(d(),E(n,{key:c.link,to:c.link},{default:x(()=>[P(k(c.name),1)]),_:2},1032,["to"]))),128))]),g(n,{to:e.parentPath},{default:x(()=>[Zo]),_:1},8,["to"])])])]),l("div",Jo,[l("div",Xo,[l("div",en,[g(a,{qualifier:e.qualifier,token:e.token},null,8,["qualifier","token"])]),l("div",tn,[(d(!0),u(S,null,O(e.files,c=>(d(),u("div",{key:c},[e.isDirectory(c)?(d(),E(n,{key:0,to:o.append(o.$route.path,c.name)},{default:x(()=>[g(p,{file:c},null,8,["file"])]),_:2},1032,["to"])):(d(),u("a",{key:1,href:e.createURL(o.$route.path+"/"+c.name),target:"_blank"},[g(p,{file:c},null,8,["file"])],8,on))]))),128)),e.isEmpty?(d(),u("div",nn,rn)):C("",!0),e.isErrored?(d(),u("div",an,cn)):C("",!0)])])])])}var un=v(Uo,[["render",dn]]);const pn={},_n={class:"container mx-auto pt-10 px-15"},mn=l("i",null,"Endpoints :: soon\u2122",-1),gn=[mn];function hn(o,t){return d(),u("div",_n,gn)}var fn=v(pn,[["render",hn]]);const ke=["Other","Trace","Debug","Info","Warn","Error"],se=q({}),xe=f(""),vn=f(0),J=q([]),bn=new je,yn=o=>{var t;return(t=ke.find(r=>o.includes(`${r.toUpperCase()} | `)))!=null?t:"Other"},we=o=>bn.toHtml(o.replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;"));function kn(){ke.forEach(e=>{se[e]={name:e,enabled:!0,count:B(()=>J.reduce((s,i)=>s+(i.level===e),0))}});const o=B(()=>J.filter(e=>e.message.toLowerCase().includes(xe.value.toLowerCase())).filter(e=>se[e.level].enabled));return{levels:se,log:o,filter:xe,sanitizeMessage:we,logMessage:e=>{J.push({id:vn.value++,message:we(e),level:yn(e)})},clearLog:()=>{J.length=0}}}const $=f(),re=f("");function xn(){const o=F("/api/console/sock").replace("https","wss").replace("http","ws"),t=()=>{var c;return((c=$.value)==null?void 0:c.readyState)===WebSocket.OPEN},r=()=>{t()&&$.value.close()},e=()=>{$.value.send(re.value),re.value=""},s=f(),i=f(),n=f(),a=f();return{connection:$,connect:c=>{try{$.value=new WebSocket(o),$.value.onopen=()=>{$.value.send(`Authorization:${c.name}:${c.secret}`),s==null||s.value()},$.value.onmessage=_=>{_.data!="keep-alive"&&(i==null||i.value(_.data))},$.value.onerror=_=>n==null?void 0:n.value(_),$.value.onclose=()=>a==null?void 0:a.value();const h=setInterval(()=>{var _;t()?(_=$==null?void 0:$.value)==null||_.send("keep-alive"):clearInterval(h)},1e3*5)}catch(h){console.log(h),n==null||n.value(h)}},close:r,onOpen:s,onMessage:i,onError:n,onClose:a,command:re,execute:e}}const wn={props:{selectedTab:{type:Object,required:!0}},setup(o){const t=o.selectedTab,{levels:r,log:e,logMessage:s,filter:i,clearLog:n}=kn(),{onOpen:a,onMessage:p,onClose:c,onError:h,connect:_,close:I,command:b,execute:w}=xn();Ve(()=>I());const R=()=>{const M=document.getElementById("console");M.scrollTop=M.scrollHeight},U=()=>{A("Connecting to the remote console",{type:"info"});const{token:M}=z();a.value=()=>n(),p.value=j=>{s(j),ge(()=>R())},h.value=j=>A(`${j||""}`,{type:"danger"}),c.value=()=>A("Connection with console has been lost",{type:"danger"}),_(M),ge(()=>{setTimeout(()=>document.getElementById("consoleInput").focus(),200)})};return D(()=>t.value,M=>M==="Console"?U():I(),{immediate:!0}),{log:e,command:b,execute:w,levels:r,filter:i}}},$n={class:"container mx-auto pt-10 px-15 text-xs"},In={class:"flex text-sm flex-col xl:flex-row w-full py-2 justify-between"},Tn={class:"flex flex-row justify-around w-full xl:w-1/2"},Cn=["checked","onChange"],En={class:"pl-2 pr-4"},Sn={class:"bg-white dark:bg-gray-900 rounded-lg"},Ln={id:"console",class:"overflow-scroll h-144 px-4"},Mn=["innerHTML"],On=l("hr",{class:"dark:border-dark-300"},null,-1);function qn(o,t,r,e,s,i){return d(),u("div",$n,[l("div",In,[G(l("input",{placeholder:"Filter","onUpdate:modelValue":t[0]||(t[0]=n=>e.filter=n),class:"w-full xl:w-1/2 mr-5 py-1 px-4 rounded-lg bg-white dark:bg-gray-900"},null,512),[[K,e.filter]]),l("div",Tn,[(d(!0),u(S,null,O(e.levels,n=>(d(),u("div",{key:n.name,class:"pt-1.9 xl:pt-0.8 font-sans"},[l("input",{type:"checkbox",checked:n.enabled,onChange:a=>n.enabled=!n.enabled},null,40,Cn),l("span",En,k(n.name)+" ("+k(n.count)+")",1)]))),128))])]),l("div",Sn,[l("div",Ln,[(d(!0),u(S,null,O(e.log,n=>(d(),u("p",{key:n.id,innerHTML:n.message,class:"whitespace-nowrap"},null,8,Mn))),128))]),On,G(l("input",{id:"consoleInput",placeholder:"Type command or '?' to get help",class:"w-full py-2 px-4 rounded-b-lg bg-white dark:bg-gray-900 dark:text-white","onUpdate:modelValue":t[1]||(t[1]=n=>e.command=n),onKeyup:t[2]||(t[2]=De(n=>e.execute(),["enter"]))},null,544),[[K,e.command]])])])}var An=v(wn,[["render",qn]]);const Bn={components:{Header:no,Browser:un,Endpoints:fn,Console:An},props:{qualifier:{type:Object,required:!0},token:{type:Object,required:!0},session:{type:Object,required:!0}},setup(o){const t=o.qualifier,r=o.token,e=o.session,{isManager:s}=z(),i=q({value:localStorage.getItem("selectedTab")||"Overview"});H(()=>localStorage.setItem("selectedTab",i.value));const n=[{name:"Overview"},{name:"Endpoints"},{name:"Console",manager:!0}],a=B(()=>n.filter(c=>!(c==null?void 0:c.manager)||s(e.details)).map(c=>c.name)),p=B(()=>a.value.some(c=>c=="Console"));return{qualifier:t,token:r,isManager:s,menuTabs:a,consoleEnabled:p,selectedTab:i}}},Pn=o=>(_e("data-v-63b115f1"),o=o(),me(),o),Rn={class:"bg-gray-100 dark:bg-black"},jn={class:"container mx-auto"},Vn=Pn(()=>l("hr",{class:"dark:border-gray-700"},null,-1)),Dn={class:"overflow-auto"};function Hn(o,t,r,e,s,i){const n=m("Header"),a=m("tab"),p=m("tabs"),c=m("Browser"),h=m("tab-panel"),_=m("Endpoints"),I=m("Console"),b=m("tab-panels");return d(),u("div",null,[g(n,{token:e.token},null,8,["token"]),l("div",Rn,[l("div",jn,[g(p,{modelValue:e.selectedTab.value,"onUpdate:modelValue":t[0]||(t[0]=w=>e.selectedTab.value=w)},{default:x(()=>[(d(!0),u(S,null,O(e.menuTabs,(w,R)=>(d(),E(a,{class:"item font-normal",key:`menu${R}`,val:w,label:w,indicator:!0},null,8,["val","label"]))),128))]),_:1},8,["modelValue"])]),Vn,l("div",Dn,[g(b,{modelValue:e.selectedTab.value,"onUpdate:modelValue":t[1]||(t[1]=w=>e.selectedTab.value=w),animate:!0},{default:x(()=>[g(h,{val:"Overview"},{default:x(()=>[g(c,{qualifier:e.qualifier,token:e.token,ref:""},null,8,["qualifier","token"])]),_:1}),g(h,{val:"Endpoints"},{default:x(()=>[g(_)]),_:1}),e.consoleEnabled?(d(),E(h,{key:0,val:"Console"},{default:x(()=>[g(I,{selectedTab:e.selectedTab},null,8,["selectedTab"])]),_:1})):C("",!0)]),_:1},8,["modelValue"])])])])}var Nn=v(Bn,[["render",Hn],["__scopeId","data-v-63b115f1"]]);const zn=He({history:Ne(),routes:[{path:"/:qualifier(.*)",name:"Index",component:Nn}]});const ae=ze(ot);ae.config.globalProperties.append=(o,t)=>o+(o.endsWith("/")?"":"/")+t;ae.config.globalProperties.drop=o=>(o.endsWith("/")?o.slice(0,-1):o).split("/").slice(0,-1).join("/");ae.use(Ue()).use(We,de).use(Ge).use(zn).mount("#app");
