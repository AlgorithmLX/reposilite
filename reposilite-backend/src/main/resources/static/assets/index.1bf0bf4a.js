var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,s=(e,s)=>{for(var l in s||(s={}))n.call(s,l)&&a(e,l,s[l]);if(t)for(var l of t(s))o.call(s,l)&&a(e,l,s[l]);return e};import{r as l,a as r,u as i,w as c,d,b as u,c as p,o as m,e as g,f,n as v,g as b,h,p as y,i as k,E as w,S as I,j as x,k as T,l as E,v as L,m as S,t as O,q as _,s as P,x as M,y as R,z as C,F as $,A as q,B as j,C as D,D as V,G as A,H as B,I as H,J as U,K as G,V as z,T as N}from"./vendor.3f13bf08.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const W=l({isDark:!1});function K(){return{theme:W,fetchTheme:()=>{W.isDark="true"===localStorage.getItem("dark-theme")},toggleTheme:()=>{W.isDark=!W.isDark,localStorage.setItem("dark-theme",W.isDark)}}}const F=()=>window.location.protocol+"//"+location.host+window.REPOSILITE_BASE_PATH,Y=e=>(F().endsWith("/")?F().slice(0,-1):F())+e,J=(e,t)=>{const n=(e,t)=>({auth:{username:e,password:t}}),o=(o,a)=>(a=a||(e&&t?n(e,t):{}),r.get(Y(o),s({},a)));return{createURL:Y,client:{auth:{me:(e,t)=>o("/api/auth/me",n(e,t))},console:{},maven:{details:e=>o("/api/maven/details/"+(e||""))}}}},Q=l({name:"",secret:""}),X={id:"",name:"",createdAt:"",permissions:[],routes:[]},Z=l({tokenInfo:X});function ee(){const e=(e,t)=>{localStorage.setItem("session-token-name",e),Q.name=e,localStorage.setItem("session-token-secret",t),Q.secret=t},t=()=>{e("",""),Z.tokenInfo=X},n=async(n,o)=>{try{const{client:t}=J();if(""==n)throw new Error("Missing credentials");const a=await t.auth.me(n,o);return e(n,o),Z.tokenInfo=a.data,console.log(Z.tokenInfo),{token:Q,session:Z}}catch(a){throw t(),a}};return{token:Q,session:Z,login:n,logout:t,fetchSession:()=>n(localStorage.getItem("session-token-name"),localStorage.getItem("session-token-secret")),isLogged:()=>""!=Q.name,isManager:e=>{var t;return null==(t=null==e?void 0:e.permissions)?void 0:t.find((e=>"access-token:manager"==e.identifier))}}}const te=l({watchable:0,path:""});const ne=d({setup(){u({title:window.REPOSILITE_TITLE,description:window.REPOSILITE_DESCRIPTION});const{theme:e,fetchTheme:t}=K(),{fetchSession:n,token:o,session:a}=ee(),{qualifier:s}=function(e){const t=i();return c((()=>t.params.qualifier),(async e=>{te.path=e,te.watchable++}),{immediate:!0}),c((()=>e.name),(async e=>{te.watchable++})),{qualifier:te}}(o);return t(),n().catch((e=>{})),{theme:e,qualifier:s,session:a}}});ne.render=function(e,t,n,o,a,s){const l=p("router-view");return m(),g("div",{class:v({dark:e.theme.isDark})},[f(l,{class:"min-h-screen dark:bg-black dark:text-white",qualifier:e.qualifier,session:e.session},null,8,["qualifier","session"])],2)};const oe={},ae={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},se=[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)];oe.render=function(e,t){return m(),g("svg",ae,se)};const le={components:{GlobeIcon:oe}},re={class:"bg-gray-100 dark:bg-black"},ie={class:"container mx-auto flex flex-row"},ce=b("div",{class:"w-35"},[b("img",{class:"border-2 rounded-full dark:border-gray-700",src:"https://avatars.githubusercontent.com/u/75123628?s=200&v=4"})],-1),de={class:"flex flex-col justify-center px-10"},ue=b("div",null,[b("p",null,"Public Maven repository for Bookkity organization")],-1),pe={class:"flex flex-row py-2"},me=b("a",{class:"px-3 text-gray-500",href:"https://github.com/bookkity"},"https://github.com/bookkity",-1);le.render=function(e,t,n,o,a,s){const l=p("GlobeIcon");return m(),g("div",re,[b("div",ie,[ce,b("div",de,[ue,b("div",pe,[f(l),me])])])])};const ge={},fe={class:"mx-2 py-1.5 rounded-full bg-white dark:bg-gray-900 font-bold px-6 text-sm cursor-pointer"};ge.render=function(e,t){return m(),g("div",fe,[h(e.$slots,"default")])};const ve={inheritAttrs:!1,components:{VueFinalModal:w,ModalsContainer:I},setup(){const{login:e}=ee(),t=x(!1),n=x(""),o=x(""),a=()=>t.value=!1;return{name:n,secret:o,close:a,showLogin:t,signin:(t,n)=>{e(t,n).then((e=>O(`Dashboard accessed as ${t}`,{position:"bottom-right"}))).then((e=>a())).catch((e=>{console.log(e),O(`${e.response.status}: ${e.response.data}`,{type:"danger"})}))}}}};y("data-v-381556d4");const be={class:"relative border bg-white dark:bg-gray-900 border-gray-100 dark:border-black m-w-20 py-5 px-10 rounded-2xl shadow-xl text-center"},he=b("p",{class:"font-bold text-xl pb-4"},"Login with access token",-1),ye={class:"flex flex-col w-96"},ke={class:"text-right mt-1"};k(),ve.render=function(e,t,n,o,a,s){const l=p("vue-final-modal");return m(),g("div",null,[f(l,S({modelValue:o.showLogin,"onUpdate:modelValue":t[5]||(t[5]=e=>o.showLogin=e)},e.$attrs,{classes:"flex justify-center items-center"}),{default:T((()=>[b("div",be,[he,b("form",ye,[E(b("input",{placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e),type:"text",class:"input"},null,512),[[L,o.name]]),E(b("input",{placeholder:"Secret","onUpdate:modelValue":t[1]||(t[1]=e=>o.secret=e),type:"password",class:"input"},null,512),[[L,o.secret]]),b("div",ke,[b("button",{onClick:t[2]||(t[2]=e=>o.close()),class:"text-blue-400 text-xs"},"← Back to index")]),b("div",{class:"bg-gray-100 dark:bg-gray-800 py-2 my-3 rounded-md cursor-pointer",onClick:t[3]||(t[3]=e=>o.signin(o.name,o.secret))},"Sign in")]),b("button",{class:"absolute top-0 right-0 mt-5 mr-5",onClick:t[4]||(t[4]=e=>o.close())},"🗙")])])),_:1},16,["modelValue"]),b("div",{onClick:t[6]||(t[6]=e=>o.showLogin=!0)},[h(e.$slots,"button",{},void 0,!0)])])},ve.__scopeId="data-v-381556d4";const we={},Ie={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},xe=[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)];we.render=function(e,t){return m(),g("svg",Ie,xe)};const Te={},Ee={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Le=[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)];Te.render=function(e,t){return m(),g("svg",Ee,Le)};const Se={components:{MenuButton:ge,LoginModal:ve,MoonIcon:we,SunIcon:Te},setup(){const{token:e,isLogged:t,logout:n}=ee(),{theme:o,toggleTheme:a}=K();return{isLogged:t,signout:()=>n(),token:e,title:x(window.REPOSILITE_TITLE),theme:o,toggleTheme:a}}},Oe={class:"flex flex-row"},_e={key:0,class:"pt-1.1 px-2"},Pe=R(" Welcome "),Me={class:"font-bold underline"},Re=R(" Sign in "),Ce=R(" Logout ");Se.render=function(e,t,n,o,a,s){const l=p("MenuButton"),r=p("LoginModal"),i=p("SunIcon"),c=p("MoonIcon");return m(),g("nav",Oe,[o.isLogged()?(m(),g("div",_e,[Pe,b("span",Me,_(o.token.name),1)])):P("",!0),f(r,null,{button:T((()=>[o.isLogged()?P("",!0):(m(),M(l,{key:0},{default:T((()=>[Re])),_:1}))])),_:1}),o.isLogged()?(m(),M(l,{key:1,onClick:t[0]||(t[0]=e=>o.signout())},{default:T((()=>[Ce])),_:1})):P("",!0),b("div",{class:"pl-2 pt-1.3 cursor-pointer rounded-full bg-white dark:bg-gray-900",onClick:t[1]||(t[1]=e=>o.toggleTheme())},[o.theme.isDark?(m(),M(i,{key:0,class:"mr-1.9"})):(m(),M(c,{key:1,class:"mr-1.5"}))])])};const $e={components:{Hero:le,Menu:Se},setup:()=>({title:window.REPOSILITE_TITLE})},qe={class:"bg-gray-100 dark:bg-black dark:text-white"},je={class:"container mx-auto flex flex-row py-10 justify-between"},De={class:"text-xl font-medium py-1"};$e.render=function(e,t,n,o,a,s){const l=p("router-link"),r=p("Menu"),i=p("Hero");return m(),g("header",qe,[b("div",je,[b("h1",De,[f(l,{to:"/"},{default:T((()=>[R(_(o.title),1)])),_:1})]),f(r,{class:"mt-0.5"})]),f(i,{class:"pt-2 pb-11"})])};const Ve=[{name:"Maven",value:"\n<dependency>\n    <groupId>{groupId}</groupId>\n    <artifactId>{artifactId}</artifactId>\n    <version>{version}</version>\n</dependency>"},{name:"Gradle Groovy",value:'implementation "{groupId}:{artifactId}:{version}"'},{name:"Gradle Kotlin",value:'implementation("{groupId}:{artifactId}:{version}")'},{name:"SBT",value:'"{groupId}" %% "{artifactId}" %% "{version}"'}],Ae={setup(){const e=l({selectedTab:Ve[0].name});return s({tabs:Ve},C(e))}},Be={class:"bg-white dark:bg-gray-900 shadow-lg p-7 dark:border-4 rounded-xl border-gray-100 dark:border-black"},He=b("div",{class:"flex flex-row justify-between"},[b("h1",{class:"font-bold"},"Artifact details")],-1),Ue=b("hr",{class:"dark:border-gray-800"},null,-1),Ge={class:"mt-6 p-4 mr-1 rounded-lg bg-gray-100 dark:bg-gray-900"},ze={class:"text-sm max-w-21"};Ae.render=function(e,t,n,o,a,s){const l=p("tab"),r=p("tabs"),i=p("tab-panel"),c=p("tab-panels");return m(),g("div",Be,[He,f(r,{modelValue:e.selectedTab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedTab=t),class:"pt-3"},{default:T((()=>[(m(!0),g($,null,q(o.tabs,((e,t)=>(m(),M(l,{class:"buildtool py-1 px-2 cursor-pointer",key:`t${t}`,val:e.name,label:e.name,indicator:!0},null,8,["val","label"])))),128))])),_:1},8,["modelValue"]),Ue,f(c,{modelValue:e.selectedTab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedTab=t),animate:!0},{default:T((()=>[(m(!0),g($,null,q(o.tabs,((e,t)=>(m(),M(i,{key:`tp${t}`,val:e.name},{default:T((()=>[b("div",Ge,[b("pre",ze,_(e.value.trim()),1)])])),_:2},1032,["val"])))),128))])),_:1},8,["modelValue"])])};const Ne={props:{file:{type:Object,required:!0}},setup:e=>({file:e.file})},We={class:"flex flex-row mb-1.5 py-3 rounded-full bg-white dark:bg-gray-900 xl:max-w-1/2 cursor-pointer"},Ke={key:0,class:"text-xm px-6 pt-1.75"},Fe={key:1,class:"text-xm px-6 pt-1.75"},Ye={class:"font-semibold"};Ne.render=function(e,t,n,o,a,s){return m(),g("div",We,["DIRECTORY"==o.file.type?(m(),g("div",Ke,"⚫")):(m(),g("div",Fe,"⚪")),b("div",Ye,_(o.file.name),1)])};const Je={components:{Card:Ae,Entry:Ne},props:{qualifier:{type:Object,required:!0}},setup(e){const t=e.qualifier,n=x(""),o=x([]),a=x(!1),s=x(void 0);return c((()=>t.watchable),(async e=>{const{token:l}=ee(),{client:r}=J(l.name,l.secret);var i;r.maven.details(t.path).then((e=>{o.value=e.data.files,a.value=0==o.value.length,s.value=void 0})).catch((e=>{console.log(e),O(`${e.response.status}: ${e.response.data.message}`,{type:"danger"}),s.value=e})),n.value=((i=`/${t.path}`).endsWith("/")?i.slice(0,-1):i).split("/").slice(0,-1).join("/")||"/"}),{immediate:!0}),{parentPath:n,files:o,isEmpty:a,isErrored:s,isDirectory:e=>"DIRECTORY"==e.type,createURL:Y}}},Qe={class:"bg-gray-100"},Xe={class:"bg-gray-100 dark:bg-black"},Ze={class:"container mx-auto"},et={class:"pt-7 pb-3 pl-2 font-semibold"},tt=b("span",{class:"select-none"},"Index of ",-1),nt={class:"select-text"},ot=b("span",{class:"font-normal text-xl text-gray-500 select-none"}," ⤴ ",-1),at={class:"dark:bg-black"},st={class:"container mx-auto relative"},lt={class:"lg:absolute pt-5 -top-5 right-8"},rt={class:"pt-4"},it=["href"],ct={key:0},dt=[b("p",null,"Directory is empty",-1)],ut={key:1},pt=[b("p",null,"Directory not found",-1)];Je.render=function(e,t,n,o,a,s){const l=p("router-link"),r=p("Card"),i=p("Entry");return m(),g("div",Qe,[b("div",Xe,[b("div",Ze,[b("p",et,[tt,b("span",nt,_(e.$route.path),1),f(l,{to:o.parentPath},{default:T((()=>[ot])),_:1},8,["to"])])])]),b("div",at,[b("div",st,[b("div",lt,[f(r)]),b("div",rt,[(m(!0),g($,null,q(o.files,(t=>(m(),g("div",{key:t},[o.isDirectory(t)?(m(),M(l,{key:0,to:e.append(e.$route.path,t.name)},{default:T((()=>[f(i,{file:t},null,8,["file"])])),_:2},1032,["to"])):(m(),g("a",{key:1,href:o.createURL(e.$route.path+"/"+t.name),target:"_blank"},[f(i,{file:t},null,8,["file"])],8,it))])))),128)),o.isEmpty?(m(),g("div",ct,dt)):P("",!0),o.isErrored?(m(),g("div",ut,pt)):P("",!0)])])])])};const mt={setup(){const e=location.protocol+"//"+location.host;return{configurations:[{type:"Maven",snippet:`\n        <repository>\n            <name>${window.REPOSILITE_TITLE}</name>\n            <id>${window.REPOSILITE_ID}</id>\n            <url>${e}</url>\n        </repository>\n        `},{type:"Gradle Groovy",snippet:`\n        maven {\n            url "${e}"\n        }\n        `},{type:"Gradle Kotlin",snippet:`\n        maven {\n            url = uri("${e}")\n        }\n        `},{type:"SBT",snippet:`\n        resolvers += "${window.REPOSILITE_TITLE}" at "${e}"\n        `}],trim:e=>{const t=e.length-e.trimStart().length-1;return e.split("\n").map((e=>e.substring(t))).join("\n").replace("#/","").trim()}}}},gt={class:"container mx-auto pt-10 pb-6 px-6"},ft={class:"text-lg font-bold"},vt={class:"my-4 py-4 px-6 rounded-lg shadow-md text-sm bg-gray-50 dark:bg-gray-900 justify-items-center"};mt.render=function(e,t,n,o,a,s){return m(),g("div",gt,[(m(!0),g($,null,q(o.configurations,(e=>(m(),g("div",{key:e.type,class:"px-7"},[b("h1",ft,_(e.type),1),b("pre",vt,_(o.trim(e.snippet)),1)])))),128))])};const bt={},ht={class:"container mx-auto pt-10 px-15"},yt=[b("i",null,"Endpoints :: soon™",-1)];bt.render=function(e,t){return m(),g("div",ht,yt)};const kt={props:{selectedTab:{type:Object,required:!0}},setup(e){const t=e.selectedTab,n=x(!1);c((()=>t.value),(e=>{console.log("Watch: "+e),n.value="Console"==e}),{immediate:!0});const o=x({}),a=x([]),s=x("");return c((()=>n.value),(e=>{var t;if(e){O("Connecting to the remote console",{type:"info",transition:"zoom"});try{const e=()=>{const e=document.getElementById("console");e.scrollTop=e.scrollHeight},t=Y("/api/console/sock").replace("https","wss").replace("http","ws");o.value=new WebSocket(t);const{token:n}=ee();o.value.onopen=()=>{o.value.send(`Authorization:${n.name}:${n.secret}`)};const s=x(0),l=new j;o.value.onmessage=t=>{const n=t.data.replaceAll("<","&lt;").replaceAll(">","&gt;");a.value.push({id:s.value++,message:l.toHtml(n)}),D((()=>e()))},o.value.onerror=e=>O(`Cli error ${e.data}`,{type:"danger"}),o.value.onclose=()=>O("Connection with console has been lost",{type:"danger"})}catch(n){console.log(n),O(`${n.response.status}: ${n.response.data}`,{type:"danger"})}}else null==(t=null==o?void 0:o.value)||t.close()})),V((()=>{var e;return null==(e=null==o?void 0:o.value)?void 0:e.close()})),{log:a,command:s,execute:()=>{o.value.send(s.value),s.value=""}}}},wt={class:"container mx-auto pt-10 px-15 text-xs"},It={class:"bg-white dark:bg-gray-900 rounded-lg"},xt={id:"console",class:"overflow-y-scroll h-144 px-4"},Tt=["innerHTML"],Et=b("hr",{class:"dark:border-dark-300"},null,-1);kt.render=function(e,t,n,o,a,s){return m(),g("div",wt,[b("div",It,[b("div",xt,[(m(!0),g($,null,q(o.log,(e=>(m(),g("p",{key:e.id,innerHTML:e.message},null,8,Tt)))),128))]),Et,E(b("input",{placeholder:"Type command or '?' to get help",class:"w-full pb-3 pt-2 px-4 rounded-b-lg bg-white dark:bg-gray-900 dark:text-white","onUpdate:modelValue":t[0]||(t[0]=e=>o.command=e),onKeyup:t[1]||(t[1]=A((e=>o.execute()),["enter"]))},null,544),[[L,o.command]])])])};const Lt={components:{Header:$e,Browser:Je,Usage:mt,Endpoints:bt,Console:kt},props:{qualifier:{type:Object,required:!0},session:{type:Object,required:!0}},setup(e){const t=e.qualifier,n=e.session,{isManager:o}=ee(),a=x([]),s=x(!1),r=l({value:"Overview"});return c((()=>n.tokenInfo),(async e=>{a.value=[{name:"Overview"},{name:"Usage"},{name:"Endpoints"},{name:"Console",manager:!0}].filter((t=>!(null==t?void 0:t.manager)||o(e))).map((e=>e.name)),s.value=a.value.find((e=>"Console"===e))}),{immediate:!0}),{qualifier:t,isManager:o,menuTabs:a,consoleEnabled:s,selectedTab:r}}};y("data-v-0519d5e8");const St={class:"bg-gray-100 dark:bg-black"},Ot={class:"container mx-auto"},_t=b("hr",{class:"dark:border-gray-700"},null,-1),Pt={class:"overflow-auto"};k(),Lt.render=function(e,t,n,o,a,s){const l=p("Header"),r=p("tab"),i=p("tabs"),c=p("Browser"),d=p("tab-panel"),u=p("Usage"),v=p("Endpoints"),h=p("Console"),y=p("tab-panels");return m(),g("div",null,[f(l),b("div",St,[b("div",Ot,[f(i,{modelValue:o.selectedTab.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedTab.value=e)},{default:T((()=>[(m(!0),g($,null,q(o.menuTabs,((e,t)=>(m(),M(r,{class:"item font-normal",key:`menu${t}`,val:e,label:e,indicator:!0},null,8,["val","label"])))),128))])),_:1},8,["modelValue"])]),_t,b("div",Pt,[f(y,{modelValue:o.selectedTab.value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.selectedTab.value=e),animate:!0},{default:T((()=>[f(d,{val:"Overview"},{default:T((()=>[f(c,{qualifier:o.qualifier,ref:""},null,8,["qualifier"])])),_:1}),f(d,{val:"Usage"},{default:T((()=>[f(u)])),_:1}),f(d,{val:"Endpoints"},{default:T((()=>[f(v)])),_:1}),o.consoleEnabled?(m(),M(d,{key:0,val:"Console"},{default:T((()=>[f(h,{selectedTab:o.selectedTab},null,8,["selectedTab"])])),_:1})):P("",!0)])),_:1},8,["modelValue"])])])])},Lt.__scopeId="data-v-0519d5e8";const Mt=B({history:H(),routes:[{path:"/:qualifier(.*)",name:"Index",component:Lt}]}),Rt=!"{{REPOSILITE.BASE_PATH}}".includes("REPOSILITE.BASE_PATH");window.REPOSILITE_BASE_PATH=Rt?"{{REPOSILITE.BASE_PATH}}":"/",window.REPOSILITE_ID=Rt?"{{REPOSILITE.ID}}":"reposilite-repository",window.REPOSILITE_TITLE=Rt?"{{REPOSILITE.TITLE}}":"Reposilite Repository",window.REPOSILITE_DESCRIPTION=Rt?"{{REPOSILITE.DESCRIPTION}}":"Default description";const Ct=U(ne);Ct.config.globalProperties.append=(e,t)=>e+(e.endsWith("/")?"":"/")+t,Ct.config.globalProperties.drop=e=>(e.endsWith("/")?e.slice(0,-1):e).split("/").slice(0,-1).join("/"),Ct.use(G()).use(z,r).use(N).use(Mt).mount("#app");
